# Add Slash Command Support for Coding Agents

## Summary
- Enable OpenSpec to generate and update custom slash commands for supported coding agents (Claude Code and Cursor).
- Provide three slash commands aligned with OpenSpec's workflow: create a change, implement a change, and archive a change.
- Share slash command templating between agents to make future extensions simple.

## Motivation
Developers use different coding agents and editors. Having consistent slash commands across tools for the OpenSpec workflow reduces friction and ensures a standard way to trigger the workflow. Supporting both Claude Code and Cursor now lays a foundation for future agents that introduce slash command features.

## Proposal
1. During `openspec init`, when a user selects a supported tool, generate slash command configuration for:
   - `/create-change` – scaffold a new OpenSpec change proposal.
   - `/implement-change` – walk through tasks in an approved change.
   - `/archive-change` – guide the user through archiving a completed change.
   - Each command file MUST provide step-by-step instructions pulled from `openspec/README.md` so the coding agent knows how to execute the corresponding workflow stage:
     - `/create-change` files explain how to pick a change ID, scaffold `proposal.md`, `tasks.md`, and delta specs, then run `openspec validate <change-id> --strict`.
     - `/implement-change` files instruct the agent to read the proposal, design, and tasks, complete tasks sequentially while marking them done, and validate with `openspec validate`.
     - `/archive-change` files outline moving the change to the archive directory, updating specs if needed, and using `openspec archive <change-id>`.
2. Store slash command definitions as Markdown files in tool-specific directories:
   - Claude Code: `.claude/commands/openspec/{create-change,implement-change,archive-change}.md`
   - Cursor: `.cursor/commands/{create-change,implement-change,archive-change}.md`
3. Centralize slash command templates so the text for each command is defined once and reused across agents.
4. During `openspec update`, update existing slash command files within marker blocks without creating new files for tools that are not already configured.

## Design Ideas
- Introduce a `SlashCommandConfigurator` base that mirrors the existing AI tool configurators.
- Each tool-specific configurator supplies file paths and any platform-specific metadata while reusing shared command templates.
- Command templates live in the TemplateManager for centralized maintenance.
- Register slash command configurators alongside existing tool configurators so both `init` and `update` commands can iterate over them.

## Open Questions
- Determine whether marker-based updates are supported in each tool's configuration format or if whole-file replacement is acceptable.
- Evaluate whether additional commands beyond the initial three should be generated by default.

## Alternatives
- Hard-code slash command text separately for each tool (rejected: duplicates templates and makes future maintenance harder).
- Delay Cursor support until its API stabilizes (rejected: adding initial support encourages early feedback).

## Risks
- Tool vendors may change their configuration formats, requiring updates to our templates.
- Incorrect file paths could lead to commands not appearing; extra validation may be required.

## Future Work
- Support additional editors/agents that expose slash command APIs.
- Allow users to customize command prompts during `openspec init`.
- Provide a command to regenerate slash commands without running full `update`.
